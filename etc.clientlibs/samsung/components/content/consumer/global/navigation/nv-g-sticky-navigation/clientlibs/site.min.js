(function(){function k(){var a=window.location.hash.trim();if(0<=a.indexOf("#")&&1<a.length){var b=d(a);a=d(g.section+" .sticky-navigation-text__link[href\x3d'"+a+"']");0<a.target.length&&0<b.target.length&&(b=a.closest(g.section).target[0],c.instances.has(b)&&c.instances.get(b).clickAnchor(a.target[0]))}}var d=window.sg.common.$q,l=window.sg.common.constants.BREAKPOINTS,f=window.sg.common.utils,h=window.sg.common.constants.KEY_CODE,g={section:".sticky-navigation"},c=function(a){var b=this;this.selector=
{section:g.section,nav:".sticky-navigation-text",naviLink:".sticky-navigation-text__link",navItem:".sticky-navigation-text__item",navMenu:".sticky-navigation-text__item a",mobileCurrent:".sticky-navigation-text__current",mobileNavi:".sticky-navigation-text__mobile-wrap",mobileOpenNaveBtn:".sticky-navigation-text__toggle",popupCta:".cta[data-target-popup-id]",colorBtn:".color-ctrl__btn",navTextButton:".sticky-navigation-text__buttons a"};this.ele={window:d(window),section:d(a),naviLink:null,navMenu:null,
nav:null,mobileOpenNaveBtn:null,mobileCurrent:null,mobileNavi:null,colorBtn:null,originalActiveMenu:null};this.scrollRect=this.fixRect=null;this.isPcMode=l.MOBILE<f.getViewPort().width;this.resizeTimer=this.orgFocusArea=null;this.isGoingScroll=!1;this.scrollTimer=0;this.clickAnchorIntervalArray=[];this.setProperty();this.handler={scroll:this.scroll.bind(this),resize:this.resize.bind(this),focusOut:this.focusOut.bind(this),outClick:this.outClick.bind(this),clickCtaButton:function(a){var b=d(null);
if("string"===typeof a.target.dataset.targetPopupId){var e=a.target.dataset.targetPopupId.trim().replace("#","");""!==e&&(b=d("#"+e))}0<b.target.length&&(f.hiddenScroll(),b.hasClass("pr-g-j2a-converter")&&void 0!==window.sg.components.prGj2aCover?window.sg.components.prGj2aCover.openPopup(b.target[0],d(a.currentTarget).find("button").target[0]):b.css({display:"block",overflow:"hidden"}))},el:{keydown:function(a){switch(a.keyCode){case h.LEFT:case h.UP:a.preventDefault();b.selectLink("prev",d(a.currentTarget).closest("li").index());
break;case h.RIGHT:case h.DOWN:a.preventDefault(),b.selectLink("next",d(a.currentTarget).closest("li").index())}}}};c.instances.set(a,this);this.init()};c.prototype.selectLink=function(a,b){var e=d(this.selector.naviLink).find("li").length-1;if("prev"===a){if(0===b)return!1;d(this.selector.navItem).eq(b-1).find("a").focus()}else{if(b===e)return!1;d(this.selector.navItem).eq(b+1).find("a").focus()}return!0};c.prototype.setProperty=function(){var a=this;this.ele.nav=this.ele.section.find(this.selector.nav);
this.ele.naviLink=this.ele.section.find(this.selector.naviLink);this.ele.mobileCurrent=this.ele.section.find(this.selector.mobileCurrent);this.ele.mobileOpenNaveBtn=this.ele.section.find(this.selector.mobileOpenNaveBtn);this.ele.mobileNavi=this.ele.section.find(this.selector.mobileNavi);this.ele.colorBtn=this.ele.section.find(this.selector.colorBtn);this.ele.navMenu=this.ele.section.find(this.selector.navMenu);this.ele.navTextButton=this.ele.section.find(this.selector.navTextButton);this.ele.originalActiveMenu=
this.ele.section.find(".sticky-navigation-text__list .is-active").target[0];this.stickyMode=this.ele.nav.hasClass("sticky-navigation-text--use-sticky");this.centerMode=this.ele.nav.hasClass("sticky-navigation-text--desktop-align-center");this.scrollRect=[];this.ele.naviLink.target.forEach(function(b){var e=b.getAttribute("href");c.isIdSelector(e)&&(e=d(e),a.scrollRect.push({top:0,area:e,btn:b}))})};c.isIdSelector=function(a){if("string"!==typeof a)return!1;a=a.trim();return"#"!==a&&0===a.indexOf("#")&&
(a=document.querySelector(a),null!==a&&void 0!==a)?!0:!1};c.prototype.init=function(){this.bindEvents();this.resize();this.setWidth(this.isPcMode);this.activeNaviBtn(this.ele.originalActiveMenu);this.setMobileText(this.ele.originalActiveMenu)};c.prototype.reInit=function(){this.setProperty();this.bindEvents();this.resize();this.setWidth(this.isPcMode);this.activeNaviBtn(this.ele.originalActiveMenu);this.setMobileText(this.ele.originalActiveMenu)};c.prototype.scroll=function(){this.ele.section.find(".active-hover").removeClass("active-hover");
if(this.stickyMode){var a=document.body.scrollTop||document.documentElement.scrollTop,b=(new Date).getTime();b>this.scrollTimer&&(this.scrollTimer=b+500,this.setFixRect(a),this.setTargetAreaTop(a));!1===this.isPcMode&&this.isLandscape||this.fixNavi(a);this.isGoingScroll||(a=this.getTargetAreaIdx(a),0<=a?this.activeNaviBtn(this.scrollRect[a].btn):-1===a&&this.activeNaviBtn(this.ele.originalActiveMenu))}};c.prototype.resize=function(){var a=this;this.ele.section.find(".active-hover").removeClass("active-hover");
var b=document.body.scrollTop||document.documentElement.scrollTop;f.getViewPort().width>f.getViewPort().height?(this.ele.section.addClass("mode--landscape"),this.isLandscape=!0):(this.ele.section.removeClass("mode--landscape"),this.isLandscape=!1);this.setTargetAreaTop(b);this.setFixRect(b);this.scroll();clearTimeout(this.resizeTimer);this.resizeTimer=null;this.resizeTimer=setTimeout(function(){var b=document.body.scrollTop||document.documentElement.scrollTop;a.setTargetAreaTop(b);a.setFixRect(b)},
300);b=l.MOBILE<f.getViewPort().width;this.isPcMode!==b&&(this.toggleNaveBtn(!0),this.setWidth(b),this.isPcMode=b)};c.prototype.setWidth=function(a){if(this.centerMode){var b=this.ele.nav.find(".sticky-navigation-text__list \x3e .sticky-navigation-text__item");b.css({width:""});a&&b.css({width:100/b.target.length+"%"})}};c.prototype.focusOut=function(a){var b=this;a.keyCode===h.TAB&&setTimeout(function(){1>d(document.activeElement).closest(b.ele.mobileNavi.target[0]).target.length&&(b.toggleNaveBtn(!0),
b.ele.mobileOpenNaveBtn.focus())}.bind(this),30)};c.prototype.outClick=function(a){1>d(a.target).closest(this.ele.mobileNavi.target[0]).target.length&&this.toggleNaveBtn(!0)};c.prototype.getTargetAreaIdx=function(a){a=a+this.fixRect.height+1;var b;for(b=0;b<this.scrollRect.length&&!(a<this.scrollRect[b].top);b++);return b-1};c.prototype.setTargetAreaTop=function(a){this.scrollRect.forEach(function(b){b.top=b.area.offset().top+a});this.scrollRect.sort(function(a,d){return a.top-d.top});if(null===this.ele.originalActiveMenu||
void 0===this.ele.originalActiveMenu)this.ele.originalActiveMenu=0<this.scrollRect.length?this.scrollRect[0].btn:this.ele.naviLink.target[0]};c.prototype.setFixRect=function(a){var b=this.ele.nav.hasClass("is-fixed");b&&this.ele.nav.removeClass("is-fixed");var d=window.getComputedStyle(this.ele.nav.target[0]);this.fixRect={top:Math.round(this.ele.section.offset().top+a),height:parseFloat(this.ele.nav.offset().height),margin:parseFloat(d.marginTop)+parseFloat(d.marginBottom)};b&&(!1===this.isPcMode&&
this.isLandscape||this.ele.nav.addClass("is-fixed"))};c.prototype.fixNavi=function(a){a>=this.fixRect.top?(this.ele.nav.parent().css({height:this.fixRect.height+this.fixRect.margin+"px"}),this.ele.nav.hasClass("is-fixed")||this.ele.nav.addClass("is-fixed")):(this.ele.nav.parent().css({height:""}),this.ele.nav.hasClass("is-fixed")&&this.ele.nav.removeClass("is-fixed"))};c.prototype.activeNaviBtn=function(a){var b=d(a);b.hasClass("is-active")||(this.ele.naviLink.removeClass("is-active"),this.ele.naviLink.find(".hidden").remove(),
b.addClass("is-active"),b.append('\x3cspan class\x3d"hidden"\x3eselected\x3c/span\x3e'),this.setMobileText(a))};c.prototype.setMobileText=function(a){this.ele.mobileCurrent.target[0].innerHTML=null!==a&&void 0!==a?a.querySelector("strong, h1").innerText:this.ele.originalActiveMenu.innerText};c.prototype.toggleNaveBtn=function(a){var b=this;a=void 0===a?!1:a;if(this.ele.mobileOpenNaveBtn.hasClass("is-active")||a)this.ele.mobileOpenNaveBtn.removeClass("is-active"),this.ele.mobileNavi.removeClass("is-active"),
this.ele.mobileOpenNaveBtn.attr("aria-expanded","false"),this.ele.window.off("keydown",this.handler.focusOut),this.ele.window.off("click",this.handler.outClick);else{var c=function(){b.ele.mobileOpenNaveBtn.addClass("is-active");b.ele.mobileNavi.addClass("is-active");b.ele.mobileOpenNaveBtn.attr("aria-expanded","true");setTimeout(function(){b.ele.window.off("keydown",b.handler.focusOut).on("keydown",b.handler.focusOut);b.ele.window.off("click",b.handler.outClick).on("click",b.handler.outClick)},30)};
this.isPcMode?c():!0===this.ele.nav.hasClass("is-fixed")?c():(a=null,a="smooth"===d("html").css("scroll-behavior")?0:300,d("html").moveScroll(this.fixRect.top,a,function(){c()}))}};c.prototype.clickAnchor=function(a){var b=this;this.clickAnchorIntervalArray.forEach(function(a){clearInterval(a)});requestAnimationFrame(function(){b.resize();b.toggleNaveBtn(!0);b.activeNaviBtn(a);var c=d(a.getAttribute("href").trim()),g=(document.body.scrollTop||document.documentElement.scrollTop)+c.offset().top-(b.stickyMode?
b.fixRect.height:0)+1;window.sg.common.lazyLoad.setDisabled();window.scrollTo(0,g);var f=null,h=b.clickAnchorIntervalArray.push(setInterval(function(){f!==window.scrollY?f=window.scrollY:(clearInterval(b.clickAnchorIntervalArray[h-1]),0<c.find("a, input, button").target.length?c.find("a, input, button").target[0].focus():c.attr("tabindex",0).focus(),window.sg.common.lazyLoad.setDisabled(!1))},300))})};c.prototype.moveFocus=function(a){var b=d(a.getAttribute("href").trim());setTimeout(function(){0<
b.find("a, input, button").target.length?b.find("a, input, button").target[0].focus():b.attr("tabindex",0).focus()},300)};c.prototype.bindEvents=function(){var a=this;this.ele.window.off("scroll",this.handler.scroll).on("scroll",this.handler.scroll);this.ele.window.off("resize",this.handler.resize).on("resize",this.handler.resize);this.ele.navMenu.off("mouseenter").on("mouseenter",function(a){d(a.currentTarget).addClass("active-hover")});this.ele.navMenu.off("mouseleave").on("mouseleave",function(a){d(a.currentTarget).removeClass("active-hover")});
this.ele.navMenu.off("keydown").on("keydown",this.handler.el.keydown);this.ele.naviLink.off("click").on("click",function(b){var d=b.currentTarget.getAttribute("href");c.isIdSelector(d)&&(b.preventDefault(),b.stopPropagation(),a.clickAnchor(b.currentTarget))});this.ele.mobileOpenNaveBtn.off("click").on("click",function(){a.toggleNaveBtn()});this.ele.section.find(this.selector.popupCta).off("click",this.handler.clickCtaButton).on("click",this.handler.clickCtaButton);this.ele.colorBtn.off("click").on("click",
function(b){var c=d("div#content");d(b.currentTarget).hasClass("color-black")?c.addClass("high-contrast"):c.removeClass("high-contrast");a.ele.colorBtn.removeAttr("aria-label");d(b.currentTarget).attr("aria-label","selected")});this.ele.navTextButton.off("click").on("click",function(b){a.moveFocus(b.currentTarget)})};c.instances=new WeakMap;window.sg.components.stickyNavigation={reInit:function(){d(g.section).target.forEach(function(a){c.instances.has(a)&&c.instances.get(a).reInit()})},goHash:k};
d.ready(function(){d(g.section).target.forEach(function(a){c.instances.has(a)||new c(a)});d(window).off("hashchange").on("hashchange",k)});d.load(function(){var a=window.location.hash.trim();if(0<=a.indexOf("#")&&1<a.length){var b=d(a);a=d(".sticky-navigation-text__link[href\x3d'"+a+"']");0<a.target.length&&0<b.target.length&&a.trigger("click")}})})();