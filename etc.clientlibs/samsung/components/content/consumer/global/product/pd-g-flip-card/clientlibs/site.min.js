(function(){var d=window.sg.common.$q,f=window.sg.common.constants.BREAKPOINTS,g=window.sg.common.utils,e=window.sg.common.swiperManager,k=window.sg.common.popupVideo,c=function(a){this.selector={cardList:".ft25-flip-card__card",flipCta:".ft25-flip-card__icon-wrap",videoCta:".video-play-cta",popupVideo:".popup-video",focusClass:"is-focus",activeClass:"is-active",desktopCarouselCls:"ft25-flip-card--desktop-swiper",mobileCarouselCls:"ft25-flip-card--mobile-swiper"};this.el={window:d(window),component:d(a)};
this.handler={resize:this.resize.bind(this),setCardFlip:this.setCardFlip.bind(this)};c.instances.set(a,this);this.setElement();this.init()};c.prototype.setElement=function(){this.el.card=this.el.component.find(".ft25-flip-card__card");this.el.motionCta=this.el.component.find(".ft25-flip-card__cta a.cta, .ft25-flip-card__card-front .ft25-flip-card__icon-wrap");this.el.swiper=this.el.component.find(".swiper-container");this.el.indicator=this.el.component.find(".indicator");this.el.arrow=this.el.component.find(".swiper-button-prev, .swiper-button-next");
this.el.videoCta=this.el.component.find(this.selector.videoCta);this.el.popupVideo=this.el.component.find(this.selector.popupVideo);this.mobileFlag=this.desktopFlag=!1;this.activeVideoCta=this.mobileSwiper=this.desktopSwiper=null;this.desktopSlidePerView=JSON.parse(this.el.swiper.target[0].dataset.swiperOption).breakpoints[768].slidesPerView;this.el.component.hasClass(this.selector.desktopCarouselCls)&&this.el.component.hasClass(this.selector.mobileCarouselCls)&&(this.mobileSwiper=this.desktopSwiper=
!0);this.el.component.hasClass(this.selector.desktopCarouselCls)&&!this.el.component.hasClass(this.selector.mobileCarouselCls)&&(this.desktopSwiper=!0,this.mobileSwiper=!1);!this.el.component.hasClass(this.selector.desktopCarouselCls)&&this.el.component.hasClass(this.selector.mobileCarouselCls)&&(this.desktopSwiper=!1,this.mobileSwiper=!0);this.el.component.hasClass(this.selector.desktopCarouselCls)||this.el.component.hasClass(this.selector.mobileCarouselCls)||(this.mobileSwiper=this.desktopSwiper=
!1);this.setInteraction()};c.prototype.init=function(){this.bindEvents();this.el.swiper.hasClass("swiper-container-initialized")&&this.indicatorDisplay()};c.prototype.reInit=function(){this.setElement();this.bindEvents();this.resize()};c.prototype.setCardFlip=function(a){var b=d(a.currentTarget),c=b.closest(this.selector.cardList).find(".ft25-flip-card__card-front");b=b.closest(this.selector.cardList).find(".ft25-flip-card__card-back");d(a.currentTarget).closest(".ft25-flip-card__card-inner").hasClass("ft25-flip-card__card-front")?
(b.addClass(this.selector.activeClass),b.find(this.selector.flipCta).focus()):(b.removeClass(this.selector.activeClass),c.find(this.selector.flipCta).focus())};c.prototype.setInteraction=function(){var a=this;f.MOBILE<g.getViewPort().width?this.el.component.hasClass("ft25-flip-card--use-mouseover-interaction")&&0<this.el.motionCta.target.length&&(this.el.motionCta.off("mouseenter").on("mouseenter",function(b){d(b.currentTarget).closest(a.selector.cardList).addClass(a.selector.focusClass)}),this.el.motionCta.off("focus").on("focus",
function(b){d(b.currentTarget).closest(a.selector.cardList).addClass(a.selector.focusClass)}),this.el.motionCta.off("mouseleave").on("mouseleave",function(b){document.activeElement!==b.currentTarget&&d(b.currentTarget).closest(a.selector.cardList).removeClass(a.selector.focusClass)}),this.el.motionCta.off("blur").on("blur",function(b){d(b.currentTarget).closest(a.selector.cardList).removeClass(a.selector.focusClass)})):(this.el.component.find(this.selector.cardList).hasClass(this.selector.focusClass)&&
this.el.component.find(this.selector.cardList).removeClass(this.selector.focusClass),this.el.motionCta.off("mouseenter"),this.el.motionCta.off("focus"),this.el.motionCta.off("mouseleave"),this.el.motionCta.off("blur"))};c.prototype.resize=function(){if(f.MOBILE<g.getViewPort().width){if(!1===this.desktopFlag){this.desktopFlag=!0;this.mobileFlag=!1;this.setInteraction();if(!1===this.desktopSwiper)return this.el.indicator.hide(),this.el.arrow.hide(),this.el.swiper.hasClass("swiper-container-initialized")&&
e.slideSwiperDestory(this.el.swiper.target[0]),!1;var a=e.getSwiper(this.el.swiper.target[0]),b=this.el.card.target.length;!1===a?b>this.desktopSlidePerView?e.slideInit(this.el.swiper.target[0]):(this.el.swiper.hasClass("swiper-container-initialized")&&e.slideSwiperDestory(this.el.swiper.target[0]),this.el.indicator.hide(),this.el.arrow.hide()):b>this.desktopSlidePerView?(!0===this.el.swiper.target[0].swiper.autoplay.running&&(this.el.swiper.target[0].swiper.autoplay.stop(),this.el.swiper.target[0].swiper.autoplay.running=
!1),a.params.pagination.clickable||(this.el.swiper.target[0].swiper.params.pagination.clickable=!0,this.el.swiper.target[0].swiper.pagination.init())):(this.el.indicator.hide(),this.el.arrow.hide(),this.el.swiper.hasClass("swiper-container-initialized")&&e.slideSwiperDestory(this.el.swiper.target[0]));this.el.swiper.hasClass("swiper-container-initialized")?(this.el.component.find(".indicator .swiper-pagination-bullets").css({transform:"translate3d(0px, 0px, 0px)"}),this.indicatorDisplay()):(this.el.indicator.hide(),
this.el.arrow.hide())}}else if(!1===this.mobileFlag){this.mobileFlag=!0;this.desktopFlag=!1;this.setInteraction();this.el.arrow.hide();if(!1===this.mobileSwiper)return this.el.indicator.hide(),this.el.swiper.hasClass("swiper-container-initialized")&&e.slideSwiperDestory(this.el.swiper.target[0]),!1;a=e.getSwiper(this.el.swiper.target[0]);b=this.el.card.target.length;!1===a?1<b?(e.slideInit(this.el.swiper.target[0]),this.el.indicator.show()):this.el.indicator.hide():1<b?(!0===this.el.swiper.target[0].swiper.autoplay.running&&
(this.el.swiper.target[0].swiper.autoplay.stop(),this.el.swiper.target[0].swiper.autoplay.running=!1),a.params.pagination.clickable||(this.el.swiper.target[0].swiper.params.pagination.clickable=!0,this.el.swiper.target[0].swiper.pagination.init()),this.indicatorDisplay()):(this.el.indicator.hide(),this.el.swiper.hasClass("swiper-container-initialized")&&e.slideSwiperDestory(this.el.swiper.target[0]))}};c.prototype.indicatorDisplay=function(){this.el.card.target.length<=this.el.swiper.target[0].swiper.params.slidesPerView?
(this.el.indicator.hide(),this.el.arrow.hide()):(this.el.indicator.show(),f.MOBILE<g.getViewPort().width&&this.el.arrow.show())};c.prototype.bindEvents=function(){var a=this;this.el.window.off("resize",this.handler.resize).on("resize",this.handler.resize);this.el.component.find(".ft25-flip-card__icon-wrap").off("click",this.handler.setCardFlip).on("click",this.handler.setCardFlip);this.el.videoCta.target.forEach(function(b,c){d(b).off("click").on("click",function(e){e.preventDefault();a.activeVideoCta=
d(b);k.open(a.el.popupVideo.target[0],c,b)})});this.el.component.find(".popup-video__btn-video-close").on("click",function(b){b.preventDefault();a.activeVideoCta.focus()})};var h=function(){d(".ft25-flip-card").target.length&&d(".ft25-flip-card").target.forEach(function(a){c.instances.has(a)||new c(a)})};c.instances=new WeakMap;d.ready(h);window.sg.components.flipcard={init:h,reInit:function(){d(".ft25-flip-card").target.forEach(function(a){c.instances.has(a)?c.instances.get(a).reInit():new c(a)})}}})();