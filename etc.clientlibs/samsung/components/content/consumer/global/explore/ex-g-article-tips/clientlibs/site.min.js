var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var d=0;return function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var d="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return d?d.call(b):$jscomp.arrayIterator(b)};$jscomp.arrayFromIterator=function(b){for(var d,c=[];!(d=b.next()).done;)c.push(d.value);return c};
$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};
(function(){var b=window.sg.common.$q,d=window.sg.common.utils,c=function(a){this.els={el:a,videoStartButtonEls:".ex-article-tips__btn-video-start",videoCloseButtonEl:".ex-article-tips__btn-video-close",video:".ex-article-tips__video-wrap div.video",articleContainerEle:a.querySelector(".ex-article-tips__topcontainer"),articletipsEle:a.querySelector(".ex-article-tips__tip"),articleContentEle:a.querySelector(".ex-article-tips__content"),window:b(window),MP4layerPopupCheck:"ex-article-tips--layerpopup",
MP4layerEmbeddedCheck:"ex-article-tips--embedded",popupvideoStartButtonEls:a.querySelectorAll(".ex-article-tips__btn-video-start"),popuplayerWrapEl:a.querySelectorAll(".ex-article-tips__layer-wrap"),popupvideoWrapEl:a.querySelectorAll(".ex-article-tips__video-wrap"),popupvideoEls:a.querySelectorAll(".ex-article-tips__video-wrap .video"),popupvideoCloseButtonEl:a.querySelectorAll(".ex-article-tips__btn-video-close")};this.video=window.sg.common.video;this.getCurrentDevice=window.sg.common.utils.getCurrentDevice;
this.handler={resize:this.resize.bind(this)};this.init()};c.prototype.init=function(){c.instances.has(this.els.el)||(c.instances.set(this.els.el,this),this.setElements(),this.setMobileLayout(),this.bindEvents())};c.prototype.resize=function(){this.setMobileLayout()};c.prototype.setElements=function(){this.container=$("body");this.$contentEmbedWrap=this.container.find(this.els.el);this.$btnPlay=this.$contentEmbedWrap.find(this.els.videoStartButtonEls);this.$sMediaClose=this.$contentEmbedWrap.find(this.els.videoCloseButtonEl);
this.$video=this.els.el.querySelectorAll(this.els.video)[0]};c.prototype.setMobileLayout=function(){if(null!==this.els.articletipsEle){var a=this.els.articleContainerEle.classList.contains("no-image");if(a||"mobile"===d.getCurrentDevice())a&&this.els.articleContentEle.parentNode&&this.els.articleContentEle.parentNode.removeChild(this.els.articleContentEle),this.els.articleContainerEle.appendChild(this.els.articletipsEle)}};c.prototype.setVideoSizePopup=function(a){"desktop"===this.getCurrentDevice()?
(.9*window.innerHeight<8.1*window.innerWidth/16?(this.els.popupvideoWrapEl[a].style.width=14.4*window.innerHeight/9+"px",this.els.popupvideoWrapEl[a].style.height=.9*window.innerHeight+"px"):(this.els.popupvideoWrapEl[a].style.width=.9*window.innerWidth+"px",this.els.popupvideoWrapEl[a].style.height=8.1*window.innerWidth/16+"px"),window.innerHeight<=this.els.popupvideoWrapEl[a].offsetHeight?(this.els.popupvideoCloseButtonEl[a].classList.add("ex-article-tips__btn-video-close--fixed"),this.els.popupvideoCloseButtonEl[a].style.left=
1440<=window.innerWidth?.9*window.innerWidth+16+"px":.9*window.innerWidth+16/1440*window.outerWidth+"px"):(this.els.popupvideoCloseButtonEl[a].classList.remove("ex-article-tips__btn-video-close--fixed"),this.els.popupvideoCloseButtonEl[a].removeAttribute("style"))):(this.els.popupvideoCloseButtonEl[a].classList.remove("ex-article-tips__btn-video-close--fixed"),this.els.popupvideoWrapEl[a].style.width=window.innerWidth+"px",this.els.popupvideoWrapEl[a].style.height=9*window.innerWidth/16+"px")};c.prototype.bindEvents=
function(){var a=this;this.$contentEmbedWrap.hasClass(this.els.MP4layerPopupCheck)?this.popupVideoEvents():this.$contentEmbedWrap.hasClass(this.els.MP4layerEmbeddedCheck)?(this.$btnPlay.on("click.contentEmbed",function(b){a.btnPlayClickHandler(b)}),this.$sMediaClose.on("click.contentEmbed",function(b){a.btnCloseHandler(b)}),this.$video&&"mp4"===this.$video.getAttribute("data-video-type")&&JSON.parse(this.$video.getAttribute("data-video-data")).autoplay&&(b(this.els.el).addClass("s-video-on"),this.video.init(this.$video),
this.video.play(this.$video))):(this.$btnPlay.on("click.contentEmbed",function(b){a.btnPlayClickHandler(b)}),this.$sMediaClose.on("click.contentEmbed",function(b){a.btnCloseHandler(b)}));this.els.window.off("resize",this.handler.resize).on("resize",this.handler.resize)};c.prototype.popupVideoEvents=function(){var a=this;[].concat($jscomp.arrayFromIterable(this.els.popupvideoStartButtonEls)).forEach(function(b,c){$(b).click(function(){document.body.style.overflow="hidden";document.body.classList.add("openvideo-popup");
a.els.popuplayerWrapEl[c].classList.add("ex-article-tips__layer-wrap--show");a.els.popupvideoEls[c].style.display="block";a.els.popupvideoEls[c].closest("section.ex-article-tips").classList.add("ex-article-tips--layerpopup-open");a.setVideoSizePopup(c);a.video.init(a.els.popupvideoEls[c]);a.currentPlayingVideo=a.els.popupvideoEls[c];"mp4"===a.els.popupvideoEls[c].getAttribute("data-video-type")&&a.video.play(a.els.popupvideoEls[c])})});[].concat($jscomp.arrayFromIterable(this.els.popupvideoCloseButtonEl)).forEach(function(b,
c){$(b).click(function(){document.body.removeAttribute("style");document.body.classList.remove("openvideo-popup");a.els.popuplayerWrapEl[c].classList.remove("ex-article-tips__layer-wrap--show");a.currentPlayingVideo.style.display="none";a.els.popupvideoEls[c].closest("section.ex-article-tips").classList.remove("ex-article-tips--layerpopup-open");a.els.popupvideoWrapEl[c].removeAttribute("style");a.video.dispose(a.currentPlayingVideo);a.video.stop(a.currentPlayingVideo);a.currentPlayingVideo={}})})};
c.prototype.btnPlayClickHandler=function(a){this.$btnPlay.addClass("opened");var b=$(a.currentTarget).closest(this.els.el);a=$(a.currentTarget);8===document.documentMode||"youtube"===a.data("vid-type")&&10>=document.documentMode||(b.addClass("s-video-on"),this.video.init(this.$video),this.video.play(this.$video))};c.prototype.btnCloseHandler=function(a){this.$btnPlay.removeClass("opened");$(a.currentTarget).closest(this.els.el).removeClass("s-video-on");this.video.dispose(this.$video);this.video.stop(this.$video);
window.sg.common.lazyLoad.setLazyLoad()};c.instances=new WeakMap;var e={initAll:function(){[].concat($jscomp.arrayFromIterable(document.querySelectorAll("section.ex-article-tips"))).forEach(function(a){c.instances.has(a)||new c(a)})}};window.sg.components.articletips=e;b.ready(function(){return e.initAll()})})();