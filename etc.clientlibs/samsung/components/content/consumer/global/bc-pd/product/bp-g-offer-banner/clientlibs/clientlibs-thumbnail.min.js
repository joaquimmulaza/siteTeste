(function(){var g=window.sg.common.$q,f=window.sg.common.lazyLoad,h=window.sg.common.utils,e=function(a){var b=this;this.selector={section:".hubble-offer-banner-v2-wrap",component:".hubble-offer-banner-v2",open:"is-collapse",btn:".hubble-offer-banner-v2__cta button",content:".hubble-offer-banner-v2",bannerImage:".hubble-offer-banner-v2__detail-img",unFoldTimeTextArea:".hubble-offer-banner-v2__detail .hubble-offer-banner-v2__simple-txt-area",unFoldTimer:".hubble-offer-banner-v2__detail .s-promo-timearea .s-timer",
close:".s-offer-close span.blind"};this.ele={window:g(window),section:g(a),component:g(a),btn:null,content:null,bannerImage:null,unFoldTimeTextArea:null,unFoldTimer:null,close:null};this.gap=null;this.handler={toggle:function(){b.ele.component.hasClass(b.selector.open)?b.openBanner():b.closeBanner()},resize:function(){b.resize()},scroll:function(){0>b.ele.btn.offset().bottom?b.ele.btn.removeClass("cta-bounce-on"):b.ele.btn.addClass("cta-bounce-on")},timer:{setCount:function(){clearInterval(b.counterTimer);
if(null===b.gap||void 0===b.gap||0>b.gap)b.gap=0;b.handler.timer.count();b.counterTimer=setInterval(b.handler.timer.count,1E3)},count:function(){var d="";var a=b.counter.numbers(b.fold.start,b.fold.end,b.gap);b.gap++;var e=b.ele.component.find(".hubble-offer-banner-v2__detail .s-promo-timearea .s-timer");(b.fold.end-b.fold.start)/1E3<b.gap&&(b.fold.use=!1,clearInterval(b.counterTimer));"00"===a.day?(e.find(".days").remove(),e.addClass("not-days")):(e.find(".days .text").innerHTML(a.day),d=a.day+" "+
b.globalText.Days+" ");e.find(".hours .text").innerHTML(a.hour);e.find(".mins .text").innerHTML(a.minute);e.find(".seconds .text").innerHTML(a.second);d=""+d+a.hour+" "+b.globalText.Hours+" "+a.minute+" "+b.globalText.Mins+" "+a.second+" "+b.globalText.Secs;a=b.ele.component.find(".hubble-offer-banner-v2__detail .hubble-offer-banner-v2__simple-txt-area .timer-txt");0<a.target.length&&a.innerHTML(d)}}};this.counter={makeDate:function(d){var a=d.replace(/\+[0-9]{4}$/,""),b=new Date(a);a=d.substring(a.length);
""!==a&&(d=parseInt(a.substring(0,3),0),a=parseInt(a.substring(3),0),0>d&&(a*=-1),b.setHours(b.getHours()+-1*d),b.setMinutes(b.getMinutes()+-1*a));return b},numbers:function(a,b,e){a=b-a-1E3*e;return 0>=a?{day:this.numFormat(0),hour:this.numFormat(0),minute:this.numFormat(0),second:this.numFormat(0)}:{day:this.numFormat(Math.floor(a/864E5)),hour:this.numFormat(Math.floor(a%864E5/36E5)),minute:this.numFormat(Math.floor(a%36E5/6E4)),second:this.numFormat(Math.floor(a%6E4/1E3))}},numFormat:function(a){return 10>
a&&0<=a?"0"+a:a}};this.fold={start:null,end:null,use:!0};this.text={};this.timer=null;this.DELAY_TIME=400;this.counterTimer=0;this.timeStart=this.timeEnd=null;e.instances.set(a,this);this.init()};e.prototype.setProperty=function(){this.ele.component=this.ele.section.find(this.selector.component);this.ele.btn=this.ele.component.find(this.selector.btn);this.ele.bannerImage=this.ele.component.find(this.selector.bannerImage);this.ele.unFoldTimeTextArea=this.ele.component.find(this.selector.unFoldTimeTextArea);
this.ele.unFoldTimer=this.ele.component.find(this.selector.unFoldTimer);this.ele.close=this.ele.component.find(this.selector.close);this.globalText=JSON.parse(this.ele.component.target[0].dataset.globalText);this.foldingPc=this.ele.component.target[0].dataset.foldingPc;this.foldingMobile=this.ele.component.target[0].dataset.foldingMobile;if(this.ele.unFoldTimeTextArea.hasClass("active")){var a=this.ele.unFoldTimeTextArea.attr("data-start-time"),b=this.ele.unFoldTimeTextArea.attr("data-end-time");
this.ele.component.addClass("is-timer");a&&(this.fold.start=this.counter.makeDate(a));b&&(this.fold.end=this.counter.makeDate(b));a&&b?this.ele.unFoldTimer.innerHTML('\x3cspan class\x3d"days"\x3e\n              \x3cspan class\x3d"text"\x3e\x3c/span\x3e\n              \x3cspan class\x3d"sub-text"\x3e'+this.globalText.Days+'\x3c/span\x3e\n            \x3c/span\x3e\n            \x3cspan class\x3d"hours"\x3e\n              \x3cspan class\x3d"text"\x3e\x3c/span\x3e\n              \x3cspan class\x3d"sub-text"\x3e'+
this.globalText.Hours+'\x3c/span\x3e\n            \x3c/span\x3e\n            \x3cspan class\x3d"mins"\x3e\n              \x3cspan class\x3d"text"\x3e\x3c/span\x3e\n              \x3cspan class\x3d"sub-text"\x3e'+this.globalText.Mins+'\x3c/span\x3e\n            \x3c/span\x3e\n            \x3cspan class\x3d"seconds"\x3e\n              \x3cspan class\x3d"text"\x3e\x3c/span\x3e\n              \x3cspan class\x3d"sub-text"\x3e'+this.globalText.Secs+"\x3c/span\x3e\n            \x3c/span\x3e"):(this.fold.start=
-1,this.fold.end=-1)}else this.fold.use=!1};e.prototype.init=function(){this.setProperty();this.bindEvents();this.bannerInit();this.bannerImageView()};e.prototype.reInit=function(){clearInterval(this.counterTimer);clearInterval(this.timer);this.unBindEvents();this.setProperty();this.bindEvents();this.bannerInit();this.bannerImageView()};e.prototype.bindEvents=function(){this.ele.btn.on("click",this.handler.toggle);this.ele.window.on("resize",this.handler.resize);this.ele.window.on("scroll",this.handler.scroll)};
e.prototype.unBindEvents=function(){this.ele.btn.off("click",this.handler.toggle);this.ele.window.off("resize",this.handler.resize);this.ele.window.off("scroll",this.handler.scroll)};e.prototype.openBanner=function(){var a=this;this.ele.component.addClass("is-move");this.ele.component.addClass("is-active");this.ele.component.removeClass("is-collapse");this.ele.component.removeClass("is-init");this.ele.close.innerHTML(this.globalText.Collapse);this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){a.ele.component.removeClass(a.selector.open);
a.ele.component.removeClass("is-move");a.ele.component.addClass("is-active");f.setLazyLoad()},this.DELAY_TIME-100)};e.prototype.closeBanner=function(){var a=this;this.ele.component.addClass("is-move");this.ele.component.removeClass("is-active");this.ele.component.addClass("is-collapse");this.ele.btn.removeClass("cta-bounce-on");this.ele.close.innerHTML(this.globalText.Expand);this.timer=setTimeout(function(){a.ele.component.addClass(a.selector.open);a.ele.component.removeClass("is-move")},this.DELAY_TIME)};
e.prototype.resize=function(){this.bannerImageView()};e.prototype.bannerImageView=function(){var a=this.ele.bannerImage.find(".hubble-offer-banner-v2__detail-img img").attr("data-desktop-src"),b=this.ele.bannerImage.find(".hubble-offer-banner-v2__detail-img img").attr("data-mobile-src");"desktop"===h.getCurrentDevice()&&a||"mobile"===h.getCurrentDevice()&&b?(this.ele.bannerImage.show(),this.ele.bannerImage.find(".img").show()):this.ele.bannerImage.hide()};e.prototype.bannerInit=function(){var a=this;
this.ele.component.hasClass("is-loaded")||(this.ele.component.addClass("is-loaded"),this.ele.component.addClass("is-init"),setTimeout(function(){a.ele.component.removeClass("is-init")},1E3));this.fold.use&&this.handler.timer.setCount();"desktop"===h.getCurrentDevice()&&"Y"===this.foldingPc||"mobile"===h.getCurrentDevice()&&"Y"===this.foldingMobile?this.closeBanner():this.openBanner()};e.prototype.getLang=function(){return document.documentElement.lang};e.instances=new WeakMap;window.sg.components.hubbleOfferBannerV2=
{init:function(){g(".hubble-offer-banner-v2-wrap").target.forEach(function(a){e.instances.has(a)||new e(a)})},reInit:function(){g(".hubble-offer-banner-v2-wrap").target.forEach(function(a){e.instances.has(a)?e.instances.get(a).reInit():new e(a)})},openBanner:function(){g(".hubble-offer-banner-v2-wrap").target.forEach(function(a){e.instances.has(a)?e.instances.get(a).openBanner():new e(a)})},closeBanner:function(){g(".hubble-offer-banner-v2-wrap").target.forEach(function(a){e.instances.has(a)?e.instances.get(a).closeBanner():
new e(a)})}}})();
(function(g,f,h){function e(a){var c="",b={};"P"===a?c="DEFAULT":"L"===a?c="LEASE":"E"===a&&(c="EUP");f.each(k,function(a,e){if(e&&e.bannerType===c)return d.show(),b=k[a],!1;d.hide()});return b}function a(a){if("Y"==BC_GROUP.bannerUseYn)return d.remove(),!1;var c="";"P"===a?c=e("P"):"L"===a?c=e("L"):"E"===a&&(c=e("E"));l(c);if(!c.bannerType)return!1;"undefined"!=typeof c.unfoldBGColor&&d.find(".hubble-offer-banner-v2__detail").css("background-color",c.foldBGColor);"undefined"!=typeof c.unfoldTitle&&d.find(".hubble-offer-banner-v2__detail-title h2").html(unescapeHtml(c.unfoldTitle));
"undefined"!=typeof c.unfoldDescription&&d.find(".hubble-offer-banner-v2__detail-desc p").html(unescapeHtml(c.unfoldDescription));"undefined"!=typeof c.foldTitle&&d.find(".hubble-offer-banner-v2__simple p.s-promo-textarea").html(unescapeHtml(c.foldTitle));"undefined"==typeof c.unfoldTextColor&&(c.unfoldTextColor="");"WHITE"===c.unfoldTextColor.toUpperCase()?(d.find(".hubble-offer-banner-v2__detail").addClass("s-theme-bright"),"none"===f(".hubble-offer-banner-v2__simple").css("display")&&d.find(".s-offer-close").addClass("s-theme-bright")):
(d.find(".hubble-offer-banner-v2__detail").removeClass("s-theme-bright"),"none"===f(".hubble-offer-banner-v2__simple").css("display")&&d.find(".s-offer-close").removeClass("s-theme-bright"));if("Y"===c.ctaUseYn){var b=c.ctaUrl?c.ctaUrl:"javascript:;";"undefined"==typeof c.ctaText&&(c.ctaText="");d.find(".hubble-offer-banner-v2__detail-cta").show();d.find(".hubble-offer-banner-v2__detail-cta a").attr("href",b);d.find(".hubble-offer-banner-v2__detail-cta a").html(c.ctaText);d.find(".hubble-offer-banner-v2__detail-cta a").append('\x3csvg class\x3d"icon" focusable\x3d"false" aria-hidden\x3d"true"\x3e\x3cuse xlink:href\x3d"#outlink-bold" href\x3d"#outlink-bold"\x3e\x3c/use\x3e');
d.find(".hubble-offer-banner-v2__detail-cta a").attr("target","_blank")}else d.find(".hubble-offer-banner-v2__detail-cta").hide();if(isClickFirst||"P"!=a)"null"!=c.imagePath&&""!=c.imagePath&&null!=c.imagePath?"null"!=c.imageTitle&&""!=c.imageTitle&&null!=c.imageTitle?d.find(".hubble-offer-banner-v2__detail-img img").attr("alt",c.imageTitle):d.find(".hubble-offer-banner-v2__detail-img img").removeAttr("alt"):d.find(".hubble-offer-banner-v2__detail-img").remove(),"null"!=c.mobileImagePath&&""!=c.mobileImagePath&&
null!=c.mobileImagePath?"null"!=c.mobileImageTitle&&"undefined"!=typeof c.mobileImageTitle&&""!=c.mobileImageTitle&&null!=c.mobileImageTitle?d.find(".hubble-offer-banner-v2__detail-mobile-img img").attr("alt",""):d.find(".hubble-offer-banner-v2__detail-mobile-img img").removeAttr("alt"):d.find(".hubble-offer-banner-v2__detail-mobile-img").remove();"undefined"==typeof c.foldTextColor&&(c.foldTextColor="");"undefined"!=typeof c.foldBGColor&&d.find(".hubble-offer-banner-v2").css("background-color",c.unfoldBGColor);
"WHITE"===c.foldTextColor.toUpperCase()?(d.find(".hubble-offer-banner-v2").addClass("s-theme-bright"),"none"!=f(".hubble-offer-banner-v2").css("display")&&d.find(".s-offer-close").addClass("s-theme-bright")):(d.find(".hubble-offer-banner-v2").removeClass("s-theme-bright"),"none"!=f(".hubble-offer-banner-v2__simple").css("display")&&d.find(".s-offer-close").removeClass("s-theme-bright"));!isClickFirst||"N"!=c.bannerFoldingStatus&&"N"!=c.mobileBannerFoldingStatus||f(".hubble-offer-banner-v2").hasClass("is-collapse")||
window.sg.components.hubbleOfferBannerV2.closeBanner();f(".hubble-offer-banner-v2__cta .s-offer-close").attr("an-tr","action tracking-"+bcPageTrack()+"-text-view more");f(".hubble-offer-banner-v2__cta .s-offer-close").attr("an-ca","indication");f(".hubble-offer-banner-v2__cta .s-offer-close").attr("an-ac","view more");f(".hubble-offer-banner-v2__cta .s-offer-close").attr("an-la","view more");setTimeout(function(){"none"===f(".hubble-offer-banner-v2__simple").css("display")&&("WHITE"===c.unfoldTextColor.toUpperCase()?
d.find(".s-offer-close").addClass("s-theme-bright"):d.find(".s-offer-close").removeClass("s-theme-bright"));"none"!=f(".hubble-offer-banner-v2__simple").css("display")&&("WHITE"===c.foldTextColor.toUpperCase()?d.find(".s-offer-close").addClass("s-theme-bright"):d.find(".s-offer-close").removeClass("s-theme-bright"))},1E3)}function b(){f(document).on("click",".hubble-offer-banner-v2__cta .s-offer-close",function(a){a.preventDefault();f(this).attr("an-ac","view more");f(this).attr("an-la","view more")})}
var d=f(".hubble-offer-banner-v2"),k=BC_GROUP.banners;f(document).on("productChangeEvent",function(){if(0<d.length){var b=BC_MODEL.leaseYn,c=f("#storeType").val();"GPv2"==c||"NewHybris"==c?a("P"):"Y"===b?a("L"):"E"===b?a("E"):a("P")}});var l=function(a){if(a&&0<Object.keys(a).length){var b=f("#hubble-offer-banner-v2"),d=b.attr("data-global-text"),e=/<[^>]*>?/g;a=void 0!=a.unfoldTitle?a.unfoldTitle.replace(e,""):" ";d=JSON.parse(d);d.Expand=Granite.I18n.get("{0} Expand",a,i18n_hint);d.Collapse=Granite.I18n.get("{0} Collapse",
a,i18n_hint);b.attr("data-global-text",JSON.stringify(d))}};f(function(){0<d.length&&(k&&0<k.length&&a("P"),b())})})(window,window.jQuery,window.document);