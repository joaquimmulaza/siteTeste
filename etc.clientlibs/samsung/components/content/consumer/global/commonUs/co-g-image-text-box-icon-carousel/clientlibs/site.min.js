(function(){var d=window.sg.common.$q,f=window.sg.common.swiperManager,g=window.sg.common.lazyLoad,b=function(a){this.selector={component:".image-text-box-icon-carousel",swiperContainer:".image-text-box-icon-carousel__body",swiperWrapper:".image-text-box-icon-carousel-block",itemWrap:".image-text-box-icon-carousel-block__item",itemimgWrap:".image-text-box-icon-carousel-block__item .image",carouselBlock:".image-text-box-icon-carousel-block__bg",textbox:".image-text-box-icon-carousel-textbox",textboxP:".image-text-box-icon-carousel-textbox__box",
arrowBtnWrap:".image-text-box-icon-carousel-arrow",mainImage:".image__main"};this.el={window:d(window),component:d(a),swiperEl:null};this.setElement();this.handler={resize:this.resize.bind(this)};b.instances.set(a,this);this.init()};b.prototype.init=function(){this.removeSlider()&&this.setElement();this.bindevents()};b.prototype.reInit=function(){this.removeSlider();this.setElement();this.bindevents()};b.prototype.bindevents=function(){var a=this;this.syncHeight();this.el.window.off("resize",this.handler.resize).on("resize",
this.handler.resize);if(this.el.swiperEl.swiper&&1<this.el.swiperEl.swiper.slides.length){var b=f.getSwiper(this.el.swiperEl);b.off("slideChange").on("slideChange",function(){var e=d(b.slides[b.activeIndex]);var c=(e.height()-e.find(a.selector.textboxP).outerHeight(!0)-2*a.el.component.find(a.selector.arrowBtnWrap).height())/2;e.find(a.selector.textbox).css({"margin-top":c+"px"});e.find(a.selector.textbox).css({"margin-bottom":c-e.find(a.selector.textboxP).outerHeight()-a.el.component.find(a.selector.arrowBtnWrap).height()-
.5+"px"});a.el.component.find(a.selector.arrowBtnWrap).css({"margin-bottom":c-.5+"px"})})}};b.prototype.resize=function(){this.syncHeight()};b.prototype.removeSlider=function(){var a=!1;this.el.swiperEl.swiper?1>=this.el.swiperEl.swiper.slides.length&&(a=!0,f.slideRemove(this.el.swiperEl)):1>=d(this.el.swiperEl).find(this.selector.itemWrap).target.length&&(a=!0);if(a)return this.el.component.find(".swiper-button-prev, .swiper-button-next, .swiper-pagination-wrap").css({display:"none"}),!0;this.el.component.find(".swiper-button-prev, .swiper-button-next, .swiper-pagination-wrap").css({display:""});
void 0===this.el.swiperEl.swiper&&f.slideReInit(this.el.swiperEl);return!1};b.prototype.setElement=function(){this.el.swiperContainer=this.el.component.find(this.selector.swiperContainer);this.el.swiperWrapper=this.el.component.find(this.selector.swiperWrapper);this.el.textbox=this.el.component.find(this.selector.textbox);this.el.textboxP=this.el.component.find(this.selector.textboxP);this.el.arrowBtnWrap=this.el.component.find(this.selector.arrowBtnWrap);this.el.swiperEl=this.el.component.find(this.selector.swiperContainer).target[0]};
b.prototype.setImgHeight=function(a){var b=this;(void 0===a?this.el.itemimgWrap:a).target.forEach(function(a){a=d(a);var b=a.closest(".swiper-slide"),e=a.find(".image .image__main");e.css({height:""});a.css({height:e.height()+"px"});b.css({height:""})});0<this.el.component.find(".swiper-container").target.length&&setTimeout(function(){f.slideUpdate(b.el.component.find(".swiper-container").target[0])},50)};b.prototype.syncHeight=function(){var a=this;g.setLazyLoad();var b=function(){var b=0;a.el.textbox.target.forEach(function(a){a.style.marginTop=
"0";a.style.marginBottom="0"});a.el.textboxP.target.forEach(function(a){b=Math.max(a.offsetHeight,b)});return b};this.el.textboxP.target.forEach(function(a){a.style.height=b()+"px"});setTimeout(function(){f.slideInitEnd(a.el.swiperEl,function(){a.el.component.find(a.selector.itemWrap).target.forEach(function(b){d(b).find(a.selector.carouselBlock+" .image__main").target.forEach(function(b){var c=d(b);if(c.hasClass("image--loaded"))a.setImgHeight(c.closest(a.selector.itemimgWrap));else c.on("load",
function(){a.setImgHeight(c.closest(a.selector.itemimgWrap))})})});if(a.el.component.find(a.selector.itemWrap).target.length){var b=d(a.el.component.find(a.selector.itemWrap).target[0]),c=0;c=0;c=b.height();c=(c-b.find(a.selector.textboxP).outerHeight(!0)-2*a.el.component.find(a.selector.arrowBtnWrap).height())/2;b.find(a.selector.textbox).css({"margin-top":c+"px"});b.find(a.selector.textbox).css({"margin-bottom":c-b.find(a.selector.textboxP).outerHeight()-a.el.component.find(a.selector.arrowBtnWrap).height()-
.5+"px"});a.el.component.find(a.selector.arrowBtnWrap).css({"margin-bottom":c-.5+"px"})}})},500)};b.instances=new WeakMap;window.sg.components.imagetextboxiconcarousel={reInit:function(){f.reInit();d(selector.section).target.forEach(function(a){b.instances.has(a)&&b.instances.get(a).reInit()})}};d.ready(function(){d(".image-text-box-icon-carousel").target.forEach(function(a){b.instances.has(a)||new b(a)})})})();