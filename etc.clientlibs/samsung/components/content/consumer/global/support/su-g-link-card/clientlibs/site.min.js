(function(){var e=window.sg.common.$q,h=window.sg.common.utils,g=window.sg.common.swiperManager,a=function(b){this.selector={linkCard:".su11-link-card__list-item",linkCardHidden:".su11-link-card__list-item:not(.card-visible)",listWrap:".su11-link-card__list-item-wrap",listTitle:".su11-link-card__list-item-title",listDesc:".su11-link-card__list-item-description",listCta:".su11-link-card__list-item-cta",viewMoreCta:".su11-link-card__more-cta",cardVisibleCls:"card-visible",desktopCarouselCls:"su11-link-card__desktop-carousel",
mobileCarouselCls:"su11-link-card__mobile-carousel",indicator:".indicator"};this.el={component:e(b)};this.handler={resize:this.resize.bind(this),activeViewCard:this.activeViewCard.bind(this)};a.instances.set(b,this);this.init()};a.prototype.setElement=function(){this.el.linkCard=this.el.component.find(this.selector.linkCard);this.el.listWrap=this.el.component.find(this.selector.listWrap);this.el.viewMoreCta=this.el.component.find(this.selector.viewMoreCta);this.el.swiper=this.el.component.find(".swiper-container");
this.el.indicator=this.el.component.find(this.selector.indicator);this.moreFlag=this.mobileFlag=this.desktopFlag=!1;this.mobileSwiper=this.desktopSwiper=null;this.swiperFlag=0<this.el.swiper.target.length?!0:!1;this.desktopSlidePerView=3;this.mobileSlidePerView=1;this.showAll=null;this.swiperFlag&&(this.el.swiper.hasClass(this.selector.desktopCarouselCls)&&(this.desktopSwiper=!0,this.mobileSwiper=!1),this.el.swiper.hasClass(this.selector.mobileCarouselCls)&&(this.desktopSwiper=!1,this.mobileSwiper=
!0))};a.prototype.init=function(){this.setElement();this.bindEvents();this.toggleViewCta();this.setListView();this.resize()};a.prototype.reInit=function(){this.init()};a.prototype.devideColumn=function(){for(var b=this,f=[],c=this.el.component.find(".su11-link-card__list-item.card-visible .su11-link-card__list-item-wrap").target,d=Math.floor(c.length/3),k=0;k<=d;k++)f.push(c.splice(0,3));"desktop"===h.getCurrentDevice()?this.swiperFlag&&!this.el.swiper.hasClass(this.selector.mobileCarouselCls)?this.setHeight(e(".card-visible .su11-link-card__list-item-wrap").target):
f.forEach(function(c){b.setHeight(c)}):this.swiperFlag&&!1!==this.mobileSwiper&&this.setHeight(e(".card-visible .su11-link-card__list-item-wrap").target)};a.prototype.setDefault=function(){this.el.listWrap.target.forEach(function(b){e(b).css({height:""})})};a.prototype.setHeight=function(b){var f=this,c=[];b.forEach(function(b){b=e(b);var d=parseFloat(b.css("padding-top"))+parseFloat(b.css("padding-bottom")),a=void 0!==b.find(f.selector.listTitle).outerHeight()?b.find(f.selector.listTitle).outerHeight():
0,k=void 0!==b.find(f.selector.listDesc).outerHeight()?b.find(f.selector.listDesc).outerHeight()+parseFloat(b.find(f.selector.listDesc).css("margin-top")):0,g=void 0!==b.find(f.selector.listCta).outerHeight()?b.find(f.selector.listCta).outerHeight():0;d=d+a+k+g;c.push(d);b.css({height:d+"px"})});var d=Math.max.apply(null,c);b.forEach(function(b){e(b).css({height:d+"px"})})};a.prototype.resize=function(){var b=this;this.setDefault();if("desktop"===h.getCurrentDevice()){if(!1===this.desktopFlag&&(this.desktopFlag=
!0,this.mobileFlag=!1,!1===this.moreFlag&&this.setListView(),this.swiperFlag)){if(!1===this.desktopSwiper)return null===this.showAll&&this.setListView(),this.devideColumn(),this.el.indicator.hide(),!1;var a=g.getSwiper(this.el.swiper.target[0]),c=this.el.linkCard.target.length;this.el.viewMoreCta.hide();this.el.linkCard.addClass(this.selector.cardVisibleCls);this.el.indicator.show();!1===a?c>this.desktopSlidePerView?g.slideInit(this.el.swiper.target[0]):this.el.indicator.hide():c<=this.desktopSlidePerView?
(g.slideSwiperDestory(this.el.swiper.target[0]),this.el.indicator.hide()):(a.params.pagination.clickable||(this.el.swiper.target[0].swiper.params.pagination.clickable=!0,this.el.swiper.target[0].swiper.pagination.init()),setTimeout(function(){!0===b.el.swiper.target[0].swiper.autoplay.running&&(b.el.swiper.target[0].swiper.autoplay.stop(),b.el.swiper.target[0].swiper.autoplay.running=!1)},300))}this.devideColumn()}else{if(!1===this.mobileFlag&&(this.mobileFlag=!0,this.desktopFlag=!1,this.swiperFlag)){if(!1===
this.mobileSwiper)return null===this.showAll&&this.setListView(),this.el.indicator.hide(),!1;a=g.getSwiper(this.el.swiper.target[0]);c=this.el.linkCard.target.length;this.el.viewMoreCta.hide();this.el.linkCard.addClass(this.selector.cardVisibleCls);this.el.indicator.show();!1===a?c>this.mobileSlidePerView?g.slideInit(this.el.swiper.target[0]):this.el.indicator.hide():c<=this.mobileSlidePerView?(g.slideSwiperDestory(this.el.swiper.target[0]),this.el.indicator.hide()):(a.params.pagination.clickable||
(this.el.swiper.target[0].swiper.params.pagination.clickable=!0,this.el.swiper.target[0].swiper.pagination.init()),setTimeout(function(){!0===b.el.swiper.target[0].swiper.autoplay.running&&(b.el.swiper.target[0].swiper.autoplay.stop(),b.el.swiper.target[0].swiper.autoplay.running=!1)},300))}this.swiperFlag&&!1!==this.mobileSwiper&&this.devideColumn()}};a.prototype.toggleViewCta=function(){var b="desktop"===h.getCurrentDevice()?6:3;this.el.linkCard.target.length>b?this.el.viewMoreCta.show():this.el.viewMoreCta.hide()};
a.prototype.setListView=function(){var b=this,a=h.getCurrentDevice(),c="desktop"===a?6:3;this.swiperFlag?"desktop"===a?this.desktopSwiper?this.el.viewMoreCta.hide():(this.el.indicator.hide(),this.el.linkCard.removeClass(this.selector.cardVisibleCls),this.el.linkCard.target.forEach(function(a,f){a=e(a);f<c&&a.addClass(b.selector.cardVisibleCls)}),this.el.linkCard.target.length>c?this.el.viewMoreCta.show():this.el.viewMoreCta.hide()):this.mobileSwiper?this.el.viewMoreCta.hide():(this.el.indicator.hide(),
this.el.linkCard.removeClass(this.selector.cardVisibleCls),this.el.linkCard.target.forEach(function(a,f){a=e(a);f<c&&a.addClass(b.selector.cardVisibleCls)}),this.el.linkCard.target.length>c?this.el.viewMoreCta.show():this.el.viewMoreCta.hide()):(this.el.linkCard.removeClass(this.selector.cardVisibleCls),this.el.linkCard.target.forEach(function(a,f){a=e(a);f<c&&a.addClass(b.selector.cardVisibleCls)}),this.el.linkCard.target.length>c?this.el.viewMoreCta.show():this.el.viewMoreCta.hide())};a.prototype.activeViewCard=
function(){var b=this,a=!0;this.el.linkCardHidden=this.el.component.find(this.selector.linkCardHidden);1>this.el.linkCardHidden.target.length-6&&(a=!1);this.el.linkCardHidden.target.forEach(function(a,d){a=e(a);6>d&&a.addClass(b.selector.cardVisibleCls);0===d&&(0<a.find(".cta").target.length?(d=a.find(".cta").eq(0),d.focus()):(d=a,d.attr("tabindex","0"),d.focus(),d.removeAttr("tabindex")))});!1===a&&(this.el.viewMoreCta.hide(),this.showAll=!0);this.moreFlag=!0;this.setDefault();this.devideColumn()};
a.prototype.bindEvents=function(){e(window).off("resize",this.handler.resize).on("resize",this.handler.resize);this.el.viewMoreCta.off("click",this.handler.activeViewCard).on("click",this.handler.activeViewCard)};var l=function(){e(".su11-link-card").target.length&&e(".su11-link-card").target.forEach(function(b){a.instances.has(b)||new a(b)})};a.instances=new WeakMap;e.ready(l);window.sg.components.su11LinkCard={init:l,reInit:function(){e(".su11-link-card").target.forEach(function(b){a.instances.has(b)?
a.instances.get(b).reInit():new a(b)})},viewMore:function(){e(".su11-link-card").target.forEach(function(b){a.instances.has(b)&&a.instances.get(b).activeViewCard()})}}})();