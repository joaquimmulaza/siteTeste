(function(){function d(){c(e.section).target.forEach(function(a){b.instances.has(a)?b.instances.get(a).reInit():new b(a)})}var c=window.sg.common.$q,g=window.sg.common.popupVideo,f=window.sg.common.utils,h=window.sg.common.constants.BREAKPOINTS,k=window.sg.common.libs,l=window.sg.common.utils.setMobileFocusLoop,m=window.sg.common.utils.removeMobileFocusLoop,e={section:".related-filter-column"},b=function(a){this.selector={section:e.section,openVideoCta:".article-card__play, .article-card__cta-video",
closeVideoCta:".popup-video__btn-video-close",closePopupCta:".layer-popup__close",warnCloseCta:".related-filter-column__popup--warning .cta--outlined",chipCloseCta:".related-filter-column__popup--filter .cta--outlined",chipCta:".article-card__hashtag-filters-chip-item .chip",eyebrowCta:".article-card__eyebrow-text",sameHeightTarget:"article-card__eyebrow-text article-card__title-text article-card__description-text article-card__date-text article-card__cta article-card__hashtag-filters-chip".split(" "),
sameHeight:"article-card__eyebrow article-card__title article-card__description article-card__date article-card__cta-wrap article-card__hashtag-filters".split(" ")};this.ele={section:c(a),window:c(window),openVideoCta:null,closeVideoCta:null,closePopupCta:null,warnCloseCta:null,chipCloseCta:null,chipCta:null,eyebrowCta:null};this.handler={openVideoPopup:this.openVideoPopup.bind(this),closePopup:this.closePopup.bind(this),chipPopup:this.chipPopup.bind(this),resize:this.resize.bind(this),eventFocusLock:this.eventFocusLock.bind(this)};
b.instances.set(a,this);this.init()};b.prototype.setHeight=function(){var a=this;this.selector.sameHeightTarget.forEach(function(b){var g=[];a.same=a.listWrap.find("."+b);a.same.target.forEach(function(a){a=c(a);a.css({height:""});g.push(a.target[0].offsetHeight+parseInt(a.css("margin-bottom")))});var d=Math.floor(Math.max.apply(null,g))+"px";a.same.target.forEach(function(b){b=c(b);b.hasClass("article-card__eyebrow-text")?a.target=a.ele.section.find(".article-card__eyebrow"):b.hasClass("article-card__title-text")?
a.target=a.ele.section.find(".article-card__title"):b.hasClass("article-card__description-text")?a.target=a.ele.section.find(".article-card__description"):b.hasClass("article-card__date-text")?a.target=a.ele.section.find(".article-card__date"):b.hasClass("article-card__cta")?a.target=a.ele.section.find(".article-card__cta-wrap"):b.hasClass("article-card__hashtag-filters-chip")&&(a.target=a.ele.section.find(".article-card__hashtag-filters"));a.target.css({height:d})})})};b.prototype.init=function(){this.setProperty();
this.bindEvents();this.resize()};b.prototype.reInit=function(){this.setProperty();this.bindEvents()};b.prototype.setProperty=function(){this.ele.openVideoCta=this.ele.section.find(this.selector.openVideoCta);this.ele.closeVideoCta=this.ele.section.find(this.selector.closeVideoCta);this.ele.closePopupCta=this.ele.section.find(this.selector.closePopupCta);this.ele.warnCloseCta=this.ele.section.find(this.selector.warnCloseCta);this.ele.chipCloseCta=this.ele.section.find(this.selector.chipCloseCta);this.ele.chipCta=
this.ele.section.find(this.selector.chipCta);this.ele.eyebrowCta=this.ele.section.find(this.selector.eyebrowCta);this.listWrap=this.ele.section.find(".related-filter-column__list");this.target=this.same=null};b.prototype.bindEvents=function(){var a=this;this.ele.openVideoCta.off("click",this.handler.openVideoPopup).on("click",this.handler.openVideoPopup);this.ele.closePopupCta.off("click",this.handler.closePopup).on("click",this.handler.closePopup);this.ele.warnCloseCta.off("click",this.handler.closePopup).on("click",
this.handler.closePopup);this.ele.chipCloseCta.off("click",this.handler.closePopup).on("click",this.handler.closePopup);this.ele.chipCta.off("click",this.handler.chipPopup).on("click",this.handler.chipPopup);this.ele.eyebrowCta.off("click",this.handler.chipPopup).on("click",this.handler.chipPopup);this.ele.window.off("resize",this.handler.resize).on("resize",this.handler.resize);this.ele.closeVideoCta.on("click",function(){a.activeCta.focus()})};b.prototype.resize=function(){var a=this;h.MOBILE<f.getViewPort().width?
this.setHeight():this.same&&this.selector.sameHeight.forEach(function(b){a.same=a.listWrap.find("."+b);a.same.target.forEach(function(a){c(a).css({height:""})})})};b.prototype.activeLayerPopup=function(){f.hiddenScroll();this.activeTarget.css({display:"block"});l(this.activeTarget.target[0]);this.activeTarget.find(".cta--outlined").focus();this.activeTarget.on("keydown",this.handler.eventFocusLock)};b.prototype.closePopup=function(){if(null===this.activeTarget)return!1;f.visibleScroll();this.activeTarget.css({display:"none"});
null!==this.activeCta&&(this.activeCta.focus(),this.activeTarget.hasClass("related-filter-column__popup--filter")&&(this.activeTarget.find(".cta--contained").attr("href","javascript:void(0)"),this.activeTarget.find(".cta--contained").removeAttr("target"),this.activeTarget.find(".cta--contained").attr("aria-label",this.linkTitle),this.activeTarget.off("keydown",this.handler.eventFocusLock)),m());this.activeCta=this.activeTarget=null};b.prototype.openVideoPopup=function(a){this.activeCta=a.currentTarget;
this.activeId=this.activeCta.getAttribute("data-video-id");this.activeTarget=this.ele.section.find("#"+this.activeId);g.open(this.activeTarget.target[0]);this.activeTarget.focus()};b.prototype.chipPopup=function(a){void 0!==a&&a.preventDefault();this.activeCta=a.currentTarget;this.activeTarget=this.ele.section.find(".related-filter-column__popup--filter");this.dataLink=c(this.activeCta).attr("data-url");this.linkType=c(this.activeCta).attr("data-new-window");this.linkTitle=c(this.activeCta).attr("data-link-title");
this.activeLayerPopup();this.activeTarget.find(".cta--contained").attr("href",this.dataLink);"true"===this.linkType&&this.activeTarget.find(".cta--contained").attr("target","_blank");this.activeTarget.find(".cta--contained").attr("aria-label",this.linkTitle);this.ele.chipCta.removeClass("chip__action--light-selected");this.ele.chipCta.removeClass("chip__action--dark-selected");c(this.activeCta).hasClass("chip__action--light")?c(this.activeCta).addClass("chip__action--light-selected"):c(this.activeCta).hasClass("chip__action--dark")&&
c(this.activeCta).addClass("chip__action--dark-selected")};b.prototype.warnPopup=function(a){a&&(this.activeCta=c(a));this.activeTarget=this.ele.section.find(".related-filter-column__popup--warning");this.activeLayerPopup()};b.prototype.eventFocusLock=function(a){a.keyCode===k.keyCode.TAB_KEY&&(!1===a.shiftKey&&this.activeTarget.find(this.selector.closePopupCta).target[0]===document.activeElement?(a.preventDefault(),this.activeTarget.find(".related-filter-column__layer-cta .cta--outlined").focus()):
!0===a.shiftKey&&this.activeTarget.find(".related-filter-column__layer-cta .cta--outlined").target[0]===document.activeElement&&(a.preventDefault(),this.activeTarget.find(this.selector.closePopupCta).focus()))};b.instances=new WeakMap;window.sg.components.relatedFilterColumn={init:d,reInit:function(){c(e.section).target.forEach(function(a){b.instances.has(a)?b.instances.get(a).reInit():new b(a)})},chipPopup:function(a){c(e.section).target.forEach(function(c){b.instances.has(c)&&b.instances.get(c).chipPopup(a)})},
closePopup:function(){c(e.section).target.forEach(function(a){b.instances.has(a)&&b.instances.get(a).closePopup()})},warnPopup:function(a){c(e.section).target.forEach(function(c){b.instances.has(c)&&b.instances.get(c).warnPopup(a)})}};c.ready(d)})();
(function(){var d=function(c){this.$element=$(c);this.init()};d.prototype.init=function(){this.setEvent()};d.prototype.setEvent=function(){this.$element.on("click",".article-card__cta a",this.clickCtaButton.bind(this))};d.prototype.clickCtaButton=function(c){c=$(c.currentTarget).attr("data-url");void 0!==c&&exitPopup.showPopup(c)};var c=$(".related-filter-column");0<c.length&&c.each(function(c,f){new d(f)})})();